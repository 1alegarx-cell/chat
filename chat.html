<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geroi Vechnost | Premium Chat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'SF Pro Display', sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –º–∞—Ç–æ–≤–æ–≥–æ —Å—Ç–µ–∫–ª–∞ (iOS Glassmorphism) */
        .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é */
        .sidebar {
            width: 280px;
            position: absolute;
            left: 0; top: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(30px);
            transform: translateX(-100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        .sidebar.open { transform: translateX(0); }

        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(4px);
            z-index: 90;
        }
        .overlay.open { display: block; }

        /* –°–æ–æ–±—â–µ–Ω–∏—è –≤ —Å—Ç–∏–ª–µ Telegram/iOS */
        #chat-window::-webkit-scrollbar { width: 4px; }
        #chat-window::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        .msg {
            max-width: 75%;
            padding: 10px 16px;
            border-radius: 20px;
            margin-bottom: 8px;
            position: relative;
            font-size: 15px;
            line-height: 1.4;
        }
        .msg.sent {
            background: linear-gradient(145deg, #007AFF, #0056D2);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }
        .msg.received {
            background: rgba(255, 255, 255, 0.12);
            color: white;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }
        .msg-info { font-size: 10px; opacity: 0.6; margin-top: 4px; text-align: right; }
        .msg-author { font-size: 11px; font-weight: 600; color: #d4af37; margin-bottom: 2px; }

        /* –ü–æ–ª–µ –≤–≤–æ–¥–∞ */
        .input-box {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 10px 20px;
            color: white;
            width: 100%;
            outline: none;
            transition: 0.3s;
        }
        .input-box:focus { background: rgba(255, 255, 255, 0.12); border-color: #007AFF; }
    </style>
</head>
<body>

    <div id="overlay" class="overlay" onclick="toggleSidebar()"></div>

    <aside id="sidebar" class="sidebar p-6 flex flex-col">
        <div class="flex items-center gap-4 mb-10">
            <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-yellow-400 to-orange-500 flex items-center justify-center font-bold text-white shadow-lg" id="avatar-circle">?</div>
            <div>
                <h3 id="sidebar-username" class="text-white font-bold">User</h3>
                <p class="text-green-400 text-xs">‚óè Online</p>
            </div>
        </div>
        <nav class="space-y-4 flex-grow">
            <button class="w-full text-left text-gray-300 hover:text-white flex items-center gap-3 transition"><span>üë§</span> –ü—Ä–æ—Ñ–∏–ª—å</button>
            <button class="w-full text-left text-gray-300 hover:text-white flex items-center gap-3 transition"><span>‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </nav>
        <button onclick="logout()" class="w-full py-3 bg-red-500/20 text-red-400 rounded-xl hover:bg-red-500/30 transition">–í—ã–π—Ç–∏</button>
    </aside>

    <main class="glass-panel w-full h-full md:w-[900px] md:h-[650px] flex flex-col relative overflow-hidden">
        <header class="p-5 flex items-center border-b border-white/10">
            <button onclick="toggleSidebar()" class="text-2xl mr-4">‚â°</button>
            <h2 class="font-bold text-white tracking-wide">GEROI VECHNOST</h2>
        </header>

        <div id="chat-window" class="flex-grow p-6 overflow-y-auto flex flex-col"></div>

        <footer class="p-5 bg-black/20">
            <div class="flex gap-3">
                <input type="text" id="messageInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." class="input-box">
                <button onclick="sendMessage()" class="bg-[#007AFF] text-white px-6 rounded-full font-bold hover:scale-105 transition active:scale-95">‚Üë</button>
            </div>
        </footer>
    </main>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyB7bTin28New3YE4GsgTjcJnzllzJn_-YI",
            authDomain: "geroivechnost.firebaseapp.com",
            databaseURL: "https://geroivechnost
